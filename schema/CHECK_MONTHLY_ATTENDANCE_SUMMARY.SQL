-- Monthly Attendance Summary per Employee
SELECT 
    EMPLOYEE_ID,
    TO_CHAR(ATTENDANCE_DATE, 'YYYY-MM') AS MONTH,
    COUNT(*) AS TOTAL_DAYS,
    SUM(CASE WHEN STATUS = 'PRESENT' THEN 1 ELSE 0 END) AS PRESENT_DAYS,
    SUM(CASE WHEN STATUS = 'ABSENT' THEN 1 ELSE 0 END) AS ABSENT_DAYS,
    SUM(CASE WHEN STATUS = 'ON LEAVE' THEN 1 ELSE 0 END) AS LEAVE_DAYS,
    SUM(CASE WHEN STATUS = 'HALF DAY' THEN 1 ELSE 0 END) AS HALF_DAYS
FROM ATTENDANCE
GROUP BY EMPLOYEE_ID, TO_CHAR(ATTENDANCE_DATE, 'YYYY-MM')
ORDER BY EMPLOYEE_ID, MONTH;

---------Daily Dashboard View (Who is Present Today)--
SELECT 
    e.EMPLOYEE_ID,
    e.NAME,
    a.ATTENDANCE_DATE,
    a.CHECK_IN_TIME,
    a.CHECK_OUT_TIME,
    a.STATUS
FROM ATTENDANCE a
JOIN EMP_DETAILS e ON a.EMPLOYEE_ID = e.EMPLOYEE_ID
WHERE a.ATTENDANCE_DATE = TRUNC(SYSDATE)
ORDER BY e.NAME;


